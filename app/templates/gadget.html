{% define "title" %}Live Blogging Gadget{% end %}

{% define "mastheadBgClass" %}bg-dark-grey{% end %}

{% define "masthead" %}
  <h1><i18n-msg msgid="live-blogging">I/O Live Embed Widget</i18n-msg></h1>
{% end %}

{% define "content" %}

<section class="card__container card__container--top slide-up">
  <div class="card js-experiment-visualizer">
    <div class="card-content">
      <h3>Personalize the I/O live embed widget for your website and share the Google+ conversation from the event with your audience.</h3>
    </div>
    <div class="card-content">
      <a href="#" data-ajax-link data-anim-card data-track-link="gadget-faq">
        <i18n-msg msgid="live-faq">Read I/O Live Embed Widget FAQ</i18n-msg>
      </a>
    </div>
    <div class="ripple">
      <div class="ripple__content"></div>
    </div>
  </div>
</section>

<div class="slide-up-delay">

  <section class="page__section page__section--gadgetpreview bg-medium-grey">
    <div layout horizontal center-center>
      <!-- <iframe src="embed"></iframe> -->
      <io-gadget videoid="8OJ7ih8EE7s" iframeCode="{{embedIframeCode}}"
                 noVideo?="{{selectedGadgetLayout === 'feed'}}"
                 noFeed?="{{selectedGadgetLayout === 'video'}}"
                 width="{{gadgetWidth}}" height="{{gadgetHeight}}"></io-gadget>
    </div>
  </section>

  <section class="page__section--customizer">
    <div class="card__container">
      <div class="card js-experiment-visualizer">
        <div class="card-content">
          <h3>Customize your widget</h3>
        </div>

        <div class="card-content">
          <h4 class="card__title">1. Select widget content</h4>
          <div class="customize__area">
            <paper-radio-group selected="{{selectedGadgetLayout}}">
              <paper-radio-button name="both" label="Live video stream + Google Developers social feed"></paper-radio-button>
              <paper-radio-button name="video" label="Live video stream only"></paper-radio-button>
              <paper-radio-button name="feed" label="Google Developers social feed only"></paper-radio-button>
            </paper-radio-group>
          </div>

          <div class="card__title" layout horizontal end wrap>
            <h4>2. Select gadget size</h4>
            <span class="heading-info">Minimum 300px and maximum 1000px</span>
          </div>
          <div class="customize__area">
            <core-label layout inline horizontal center>
              <paper-slider min="300" max="1000" value="800" editable pin immediateValue="{{gadgetWidth}}" for></paper-slider>Width (px)
            </core-label>
            <core-label layout inline horizontal center>
              <paper-slider min="300" max="600" value="350" editable pin immediateValue="{{gadgetHeight}}" for></paper-slider>Height (px)
            </core-label>
          </div>

          <h4>3. Embed this code into your site</h4>
          <div class="customize__area">
            <paper-input-decorator label="Embed code snippet">
              <paper-autogrow-textarea rows="2">
                <textarea readonly on-focus="{{selectGadgetCodeSnippet}}">{{embedIframeCode}}</textarea>
              </paper-autogrow-textarea>
            </paper-input-decorator>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>

<script>
(function() {

  // Page-specific JS that runs when this page is loaded for the first time.
  function initPage() {
    var page = IOWA.Elements.Template.pages[IOWA.Elements.Template.selectedPage];

    if (page.hasBeenLoaded) {
      return;
    }

    page.load = function() {
      // IOWA.Request.cacheThenNetwork(socialPostsEndpoint, processSocialPosts, processSocialPosts);
      // // Set a timeout to fetch new posts after 30 seconds.
      // updateSocialPostsTimeout = window.setTimeout(updateSocialPosts, socialPostUpdateInterval);

     // Reset template variables for when revisiting the page.
      IOWA.Elements.Template.selectedGadgetVideoSize = 'small';
      IOWA.Elements.Template.selectedGadgetLayout = 'both';
    };

    // page.unload = function() {
    //   if (updateSocialPostsTimeout) {
    //     window.clearTimeout(updateSocialPostsTimeout);
    //     updateSocialPostsTimeout = null;
    //   }
    // };

    IOWA.Elements.Template.selectGadgetCodeSnippet = function(e, detail, sender) {
      sender.select();
    };

    page.load(); // Run load callback on page load.
    page.hasBeenLoaded = true;
  }

  // IE will be "loading" at this point. Other browsers will already be "complete".
  if (document.readyState !== 'loading') {
    initPage();
  }

  // Necessary for IE's lack of native <template>
  // https://github.com/GoogleChrome/ioweb2015/issues/599
  window._initPage = initPage;

})();
</script>

{% end %}
